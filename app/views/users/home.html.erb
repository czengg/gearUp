<% if signed_in? %>
	<div class="dashboard-container">
		<h1>Your Sports</h1>
		<ul class="sports-list">
			<% player_match_ids = [] %>
			<% Player.find(User.find(current_user.id)).matches.each do |match| %>
				<% player_match_ids.push(match.sport_id) %>
			<% end %>
			<% Sport.alphabetical.all.each do |sport| %>
				<% if player_match_ids.uniq.include?(sport.id) %>		
					<div class="arrow-container" onclick="clicked(<%=sport.name%>, this);">
						<li class="sport"><%=sport.name%></li>
					</div>
				<% end %>
			<% end %>
		</ul>
		<% Player.find(User.find(current_user.id)).matches.each do |match|  %>
			<div class="sport-info" id="<%=match.sport.name%>">
				<h1 class="inline">Your Score</h1><div class="inline sport-score"><%=match.rank.score%></div>
				<h1>Recent Matches</h1>
				<% Player.find(User.find(current_user.id)).last_ten.each do |match| %>
					<% if match.rank.score < 0 %>
						LOST - <%=Player.find(match.player_one_id).name%> vs <%=Player.find(match.player_two_id).name%>
					<% elsif match.rank.score > 0 %>
						WON - <%=Player.find(match.player_one_id).name%> vs <%=Player.find(match.player_two_id).name%>
					<% else %>
						TIE - <%=Player.find(match.player_one_id).name%> vs <%=Player.find(match.player_two_id).name%>
					<% end %>
				<% end %>
			</div>
		<% end %>
	</div>
<% else %>
	<script type="text/javascript">
		window.location.href="/users/new"
	</script>
<% end %>

<script>
	function clicked(id, that) {
		$('.sport-info').hide();
		$(id).show();
		$('.arrow-container').removeClass('active');
		$(that).addClass('active');
	}
	$('.sport-info').hide();
</script>